hplp: code for communicating with recent HP calculators
=======================================================

Status
------
As of 2013/10/24, hplp (still called test_hpcalcs for now) is an early toolkit
for two-way communications with a single HP Prime calculator running "SDKV0.30"
firmware version from mid-August 2013.
It features a terminal-based UI, which triggers successful packet sends and
receives to/from my beta-tester's calculator using the appropriate protocol.

Goals
-----
Laying the groundwork for GUIs dealing with two-way communication with HP Prime
calculators, and possibly 39gII (these calcs are supposed to be somewhat
similar), using USB HID class.

Non-goals
---------
As far as I'm concerned:
* duplicating / replacing code targeting older, non-USB HID-based HP
  calculators is not a goal;
* making a GUI comparable to HP's is not a goal either, but other people should
  obviously do it, in order to make the software much more usable.

Technical notes
---------------
The code leverages HIDAPI, and it was strongly inspired by the time-proven
concepts and APIs of the libti* family, which I (Lionel Debroux) am the
current maintainer of.
The libti* family ( https://github.com/debrouxl/tilibs ) forms the back-end for
TILP, TIEmu, TilEm and titools (mainly), and contains the only third-party
portable FLOSS code with two-way communication support for all three series of
TI-Z80, TI-68k and TI-Nspire graphing calculators.
Putting together framework strongly inspired by libti* took a bit of work,
but having such a foundation saves time in the longer term. IOW, it's worth
the apparent complexity.

Obviously, until the calculator's protocol is better documented, the API
may change a bit in backwards-incompatible manners.

Build process
-------------
The build process is that of pretty much any autotools-based piece of
software:
$ autoreconf -i -f
$ ./configure
$ ./make
# make install

The only external dependency, for now, is HIDAPI:
https://github.com/signal11/hidapi.git
Unless your Linux distro packages it, you need to compile and install it
yourself (it is also an autotools-based project).

TODO list
---------
(before wider public release)
* add testing code / authoritative example, based on test_ticalcs_2;
* conditional block in configure.ac for hidapi (Windows, MacOS X) vs.
  hidapi-hidraw (Linux);
(after wider public release)
* add comments to the code, of course. They will look like those in libti*,
  and will be useful for ...
* ... hopefully attracting contributors who have an actual HP Prime calculator
  (I don't) and have more free time than I do;
* a GUI, but I won't be the one doing it;
* add devices probing code (the hpcables part currently assumes that the
  calculator is plugged in and that there's a single calculator);
* add error codes and their propagation to the caller, like in libti*;
* actually use translation framework in the code (beyond requiring intltool
  in configure);
* add "attached", "busy" and "open" setting / resetting / checking, like
  in libti*. These variables should be explicitly made atomic (C11), if
  modern (cross-)MinGW supports that;
* somehow gain better knowledge of the protocol, so as to be able to...
* ... add more operations and data structures. 
* add support for Prime in fake MSD mode, for firmware upgrades ? I've
  already partially analyzed the protocol and published my notes at
  http://tiplanet.org/hpwiki/index.php?title=HP_Prime/Linking_Protocol
  but I'm not really confident about it ;)
  Need to find a library for MSD. libusbx does not recommend using it
  in MSD mode.
* certainly much more, if users and programmers think the software is
  useful :-)

License
-------
Copyright (C) 2013 Lionel Debroux

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software Foundation,
Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA.

Changelog
---------
2013/10/22-2x: Created autotools-based project and test client; vastly
expand the code.
2013/10/21: Split into multiple files, but still piggybacking hidtest.cpp.
2013/10/20: First public version.
2013/10/19: Project started.

Thanks / greetings
------------------
* Xavier "critor" Andréani for testing on his real Prime and providing USB
  packet dumps (which I analyzed with Wireshark);
* the other TI-Planet ( http://tiplanet.org/ ) admins;
* the HP Prime developer team at HP: some of its members spend time attending
  message boards, even in communities traditionally interested in TI calcs
  (Omnimaga, Cemetech, TI-Planet), which is a win-win move.
